(()=>{var e={};e.id=751,e.ids=[751],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5358:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c}),s(3023),s(6070),s(5866);var a=s(3191),i=s(8716),r=s(7922),n=s.n(r),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["new-audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3023)),"/workspaces/logosaudit/app/new-audit/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6070)),"/workspaces/logosaudit/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/logosaudit/app/new-audit/page.tsx"],m="/new-audit/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/new-audit/page",pathname:"/new-audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2691:(e,t,s)=>{Promise.resolve().then(s.bind(s,6129))},6129:(e,t,s)=>{"use strict";s.d(t,{default:()=>z});var a=s(326),i=s(7577),r=s(5047),n=s(2643),l=s(772),d=s(4432),c=s(1048),o=s(7673),m=s(64),u=s(567),x=s(8787),p=s(9635),h=s(4061),f=s(8378),g=s(3685),v=s(4659),j=s(1890),y=s(9183),N=s(3855),b=s(4019),w=s(5431),S=s(3761),k=s(4215),C=s(3273),A=s(6283),D=s(1709);let Z=(0,s(6557).Z)("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);var I=s(7888);let F={"application/pdf":".pdf","text/plain":".txt","image/jpeg":".jpg,.jpeg","image/png":".png","image/gif":".gif"},E={"application/pdf":A.Z,"text/plain":A.Z,"image/jpeg":D.Z,"image/png":D.Z,"image/gif":D.Z};function M({auditId:e,isoStandard:t,uploadedBy:s,onUploadComplete:r,onUploadStart:d}){let[c,o]=(0,i.useState)(!1),[x,p]=(0,i.useState)([]),[h,f]=(0,i.useState)([]),[j,y]=(0,i.useState)(null),N=(0,i.useRef)(null),{uploadDocument:w,isUploading:S}=function(){let[e,t]=(0,i.useState)(!1),[s,a]=(0,i.useState)(!1);return{uploadDocument:async(e,s,a,i)=>{t(!0);try{let t=new FormData;t.append("file",e),t.append("auditId",s),t.append("uploadedBy",a),t.append("isoStandard",i);let r=await fetch("/api/documents/upload",{method:"POST",body:t});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to upload document")}return await r.json()}catch(e){throw console.error("Failed to upload document:",e),e}finally{t(!1)}},getDocumentsByAudit:async e=>{a(!0);try{let t=await fetch(`/api/documents/${e}`);if(!t.ok)throw Error("Failed to fetch documents");return await t.json()}catch(e){throw console.error("Failed to fetch documents:",e),e}finally{a(!1)}},deleteDocument:async(e,t)=>{try{if(!(await fetch(`/api/documents/${e}/${t}`,{method:"DELETE"})).ok)throw Error("Failed to delete document")}catch(e){throw console.error("Failed to delete document:",e),e}},getDocumentById:async(e,t)=>{try{let s=await fetch(`/api/documents/${e}/${t}`);if(!s.ok){if(404===s.status)return null;throw Error("Failed to fetch document")}return await s.json()}catch(e){throw console.error("Failed to fetch document:",e),e}},isUploading:e,isLoadingDocuments:s}}(),{toast:A}=(0,k.pm)(),D=e=>Object.keys(F).includes(e.type)?e.size>10485760?`File size too large: ${(e.size/1048576).toFixed(1)}MB. Maximum size is 10MB.`:null:`Unsupported file type: ${e.type}. Please upload PDF, text, or image files.`,M=e=>{if(!e)return;let t=[],s=[];if(Array.from(e).forEach(e=>{let a=D(e);a?s.push(`${e.name}: ${a}`):t.push(e)}),s.length>0){y(s.join("\n"));return}y(null),p(e=>[...e,...t])},P=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?o(!0):"dragleave"===e.type&&o(!1)},z=e=>{p(t=>t.filter((t,s)=>s!==e))},T=async()=>{if(0!==x.length){y(null),d?.();try{let a=x.map(a=>w(a,e,s,t)),i=await Promise.all(a);f(e=>[...e,...i]),p([]),i.forEach(e=>{r?.(e)}),A({title:"Documents uploaded successfully",description:`${i.length} document(s) uploaded and queued for analysis.`})}catch(e){console.error("Upload failed:",e),y(e instanceof Error?e.message:"Upload failed"),A({title:"Upload failed",description:"There was an error uploading your documents. Please try again.",variant:"destructive"})}}},O=e=>{let t=E[e.type]||Z;return a.jsx(t,{className:"h-4 w-4"})},R=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return(0,a.jsxs)(n.Zb,{className:"w-full",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[a.jsx(g.Z,{className:"h-5 w-5"}),"Document Upload"]}),a.jsx(n.SZ,{children:"Upload relevant documents for AI-powered analysis and ISO clause matching. Supported formats: PDF, Text, and Images (max 10MB each)."})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[j&&(0,a.jsxs)(C.bZ,{variant:"destructive",children:[a.jsx(I.Z,{className:"h-4 w-4"}),a.jsx(C.X,{className:"whitespace-pre-line",children:j})]}),(0,a.jsxs)("div",{className:`
            border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer
            ${c?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}
          `,onDragEnter:P,onDragLeave:P,onDragOver:P,onDrop:e=>{e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&M(e.dataTransfer.files)},onClick:()=>N.current?.click(),children:[a.jsx(g.Z,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop files here, or click to browse"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF, TXT, JPG, PNG, GIF (max 10MB each)"})]}),a.jsx("input",{ref:N,type:"file",multiple:!0,accept:Object.values(F).join(","),onChange:e=>{M(e.target.files)},className:"hidden"}),x.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Selected Files"}),x.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[O(e),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:R(e.size)})]})]}),a.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>z(t),disabled:S,children:a.jsx(b.Z,{className:"h-4 w-4"})})]},t)),a.jsx(l.z,{onClick:T,disabled:S||0===x.length,className:"w-full",children:S?(0,a.jsxs)(a.Fragment,{children:[a.jsx(g.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Upload ",x.length," File(s)"]})})]}),S&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between text-sm",children:a.jsx("span",{children:"Uploading documents..."})}),a.jsx(m.E,{value:void 0,className:"w-full"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Documents will be analyzed in the background after upload."})]}),h.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Recently Uploaded"}),h.map(e=>a.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.originalName}),a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(u.C,{variant:"outline",className:"text-xs",children:["PENDING"===e.analysisStatus&&"Queued for Analysis","PROCESSING"===e.analysisStatus&&"Analyzing...","COMPLETED"===e.analysisStatus&&"Analysis Complete","FAILED"===e.analysisStatus&&"Analysis Failed"]})})]})]})},e.id))]})]})]})}let P=[{id:1,title:"Audit Details",icon:x.Z},{id:2,title:"Lead Auditor",icon:p.Z},{id:3,title:"Interviewees",icon:h.Z},{id:4,title:"Scope Selection",icon:f.Z},{id:5,title:"Document Upload",icon:g.Z},{id:6,title:"Review & Create",icon:v.Z}];function z(){let e=(0,r.useRouter)(),{createAudit:t,isCreatingAudit:s}=(0,w.V)(),{toast:d}=(0,k.pm)(),[c,o]=(0,i.useState)(1),[u,x]=(0,i.useState)({title:"",companyName:"",companyAddress:"",leadAuditorName:"",leadAuditorEmail:"",leadAuditorTitle:"",isoStandard:"ISO9001",interviewees:[],selectedSections:[],customScope:!1,uploadedDocuments:[]}),[p,h]=(0,i.useState)(null),f=e=>{x(t=>({...t,...e}))},g=e=>{switch(e){case 1:return!!(u.title&&u.companyName&&u.companyAddress);case 2:return!!(u.leadAuditorName&&u.leadAuditorEmail);case 3:case 5:case 6:return!0;case 4:return u.selectedSections.length>0;default:return!1}},N=async()=>{if(g(c)){if(4===c&&!p)try{let e=await t(u);if(e)h(e.id),d({title:"Audit Created",description:"Your audit has been created. You can now upload documents."});else{d({title:"Error",description:"Failed to create audit. Please try again.",variant:"destructive"});return}}catch(e){d({title:"Error",description:"Failed to create audit. Please try again.",variant:"destructive"});return}c<P.length&&o(e=>e+1)}},b=async()=>{if(!p){d({title:"Error",description:"Audit was not properly created. Please go back and try again.",variant:"destructive"});return}d({title:"Audit Setup Complete",description:"Your audit has been created and is ready for execution."}),e.push(`/audit-execution/${p}`)},S=e=>{f({uploadedDocuments:[...u.uploadedDocuments||[],e]})},C=c/P.length*100;return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[a.jsx(n.Zb,{children:(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)(n.ll,{children:["Step ",c," of ",P.length]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[Math.round(C),"% Complete"]})]}),a.jsx(m.E,{value:C,className:"mb-4"}),a.jsx("div",{className:"flex items-center justify-between",children:P.map(e=>{let t=e.icon;return(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx("div",{className:`
                    flex items-center justify-center w-8 h-8 rounded-full border-2 
                    ${c>=e.id?"bg-primary border-primary text-primary-foreground":"border-muted-foreground text-muted-foreground"}
                  `,children:a.jsx(t,{className:"h-4 w-4"})}),a.jsx("span",{className:`text-xs ${c>=e.id?"text-primary":"text-muted-foreground"}`,children:e.title})]},e.id)})})]})}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:P[c-1]?.title})}),a.jsx(n.aY,{children:(()=>{switch(c){case 1:return a.jsx(O,{formData:u,updateFormData:f});case 2:return a.jsx(R,{formData:u,updateFormData:f});case 3:return a.jsx($,{formData:u,updateFormData:f});case 4:return a.jsx(_,{formData:u,updateFormData:f});case 5:return a.jsx(T,{auditId:p,isoStandard:u.isoStandard,uploadedBy:"current-user",onDocumentUpload:S,uploadedDocuments:u.uploadedDocuments||[]});case 6:return a.jsx(L,{formData:u,createdAuditId:p});default:return null}})()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(l.z,{variant:"outline",onClick:()=>{c>1&&o(e=>e-1)},disabled:1===c,className:"gap-2",children:[a.jsx(j.Z,{className:"h-4 w-4"}),"Previous"]}),c<P.length?(0,a.jsxs)(l.z,{onClick:N,disabled:!g(c)||4===c&&s,className:"gap-2",children:[4===c&&s?"Creating Audit...":"Next",a.jsx(y.Z,{className:"h-4 w-4"})]}):(0,a.jsxs)(l.z,{onClick:b,disabled:!p,className:"gap-2",children:["Complete Setup",a.jsx(v.Z,{className:"h-4 w-4"})]})]})]})}function T({auditId:e,isoStandard:t,uploadedBy:s,onDocumentUpload:i,uploadedDocuments:r}){return e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Upload Supporting Documents"}),a.jsx("p",{className:"text-muted-foreground",children:"Upload relevant documents that will be analyzed using AI to match with ISO clauses. This step is optional but will enhance your audit with intelligent document references."})]}),a.jsx(M,{auditId:e,isoStandard:t,uploadedBy:s,onUploadComplete:i}),r.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Uploaded Documents"}),a.jsx("div",{className:"grid gap-2",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:e.originalName})]}),(0,a.jsxs)(u.C,{variant:"outline",className:"text-xs",children:["PENDING"===e.analysisStatus&&"Queued","PROCESSING"===e.analysisStatus&&"Analyzing","COMPLETED"===e.analysisStatus&&"Complete","FAILED"===e.analysisStatus&&"Failed"]})]},e.id))})]})]}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Audit must be created before uploading documents."})})}function O({formData:e,updateFormData:t}){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"title",children:"Audit Title *"}),a.jsx(d.I,{id:"title",value:e.title,onChange:e=>t({title:e.target.value}),placeholder:"e.g., Annual ISO 9001 Compliance Audit"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"companyName",children:"Company Name *"}),a.jsx(d.I,{id:"companyName",value:e.companyName,onChange:e=>t({companyName:e.target.value}),placeholder:"e.g., ABC Manufacturing Ltd."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"companyAddress",children:"Company Address *"}),a.jsx(o.g,{id:"companyAddress",value:e.companyAddress,onChange:e=>t({companyAddress:e.target.value}),placeholder:"Full company address including city, state, and postal code",rows:3})]})]})})}function R({formData:e,updateFormData:t}){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"leadAuditorName",children:"Lead Auditor Name *"}),a.jsx(d.I,{id:"leadAuditorName",value:e.leadAuditorName,onChange:e=>t({leadAuditorName:e.target.value}),placeholder:"Full name of the lead auditor"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"leadAuditorEmail",children:"Email Address *"}),a.jsx(d.I,{id:"leadAuditorEmail",type:"email",value:e.leadAuditorEmail,onChange:e=>t({leadAuditorEmail:e.target.value}),placeholder:"lead.auditor@company.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"leadAuditorTitle",children:"Job Title"}),a.jsx(d.I,{id:"leadAuditorTitle",value:e.leadAuditorTitle,onChange:e=>t({leadAuditorTitle:e.target.value}),placeholder:"e.g., Senior Quality Auditor"})]})]})})}function $({formData:e,updateFormData:t}){let s=()=>{t({interviewees:[...e.interviewees,{name:"",jobTitle:"",department:"",email:""}]})},i=s=>{t({interviewees:e.interviewees.filter((e,t)=>t!==s)})},r=(s,a,i)=>{t({interviewees:e.interviewees.map((e,t)=>t===s?{...e,[a]:i}:e)})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Interviewees"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Add key personnel who will be interviewed during the audit"})]}),(0,a.jsxs)(l.z,{onClick:s,variant:"outline",className:"gap-2",children:[a.jsx(N.Z,{className:"h-4 w-4"}),"Add Interviewee"]})]}),0===e.interviewees.length?(0,a.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-muted rounded-lg",children:[a.jsx(h.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No interviewees added yet"}),(0,a.jsxs)(l.z,{onClick:s,variant:"outline",className:"mt-4 gap-2",children:[a.jsx(N.Z,{className:"h-4 w-4"}),"Add First Interviewee"]})]}):a.jsx("div",{className:"space-y-4",children:e.interviewees.map((e,t)=>a.jsx(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Interviewee ",t+1]}),a.jsx(l.z,{variant:"ghost",size:"sm",onClick:()=>i(t),className:"text-destructive hover:text-destructive",children:a.jsx(b.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{children:"Name *"}),a.jsx(d.I,{value:e.name,onChange:e=>r(t,"name",e.target.value),placeholder:"Full name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{children:"Job Title *"}),a.jsx(d.I,{value:e.jobTitle,onChange:e=>r(t,"jobTitle",e.target.value),placeholder:"Job title"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{children:"Department"}),a.jsx(d.I,{value:e.department,onChange:e=>r(t,"department",e.target.value),placeholder:"Department"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{children:"Email"}),a.jsx(d.I,{type:"email",value:e.email,onChange:e=>r(t,"email",e.target.value),placeholder:"email@company.com"})]})]})]})},t))})]})}function _({formData:e,updateFormData:t}){let s=(0,S.$Q)(e.isoStandard),i=(0,S.GG)(e.isoStandard),r=e=>{t({isoStandard:e,selectedSections:[]})},d=s=>{t({selectedSections:e.selectedSections.includes(s)?e.selectedSections.filter(e=>e!==s):[...e.selectedSections,s]})};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select ISO Standard"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the ISO standard for this audit"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:S.zg.map(t=>{let s=e.isoStandard===t.id;return a.jsx(n.Zb,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>r(t.id),children:(0,a.jsxs)(n.aY,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(u.C,{variant:"outline",className:"font-semibold",children:t.name}),a.jsx(u.C,{variant:"secondary",children:t.version})]}),a.jsx("h4",{className:"font-medium mb-2",children:t.fullName}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),a.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${s?"bg-primary border-primary":"border-muted-foreground"}`,children:s&&a.jsx(v.Z,{className:"h-3 w-3 text-primary-foreground"})})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.sections.length," sections • ",t.sections.reduce((e,t)=>e+t.questionCount,0)," total questions"]})]})},t.id)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium",children:"Select Audit Scope"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Select the ",s?.name," sections to include in this audit"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>{t({selectedSections:i.map(e=>e.id)})},children:"Select All"}),a.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>{t({selectedSections:[]})},children:"Select None"})]})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:i.map(t=>{let s=e.selectedSections.includes(t.id);return a.jsx(n.Zb,{className:`cursor-pointer transition-all hover:shadow-md ${s?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>d(t.id),children:(0,a.jsxs)(n.aY,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(u.C,{variant:"outline",children:t.number}),a.jsx(u.C,{variant:"critical"===t.riskLevel?"destructive":"secondary",children:t.riskLevel})]}),a.jsx("h4",{className:"font-medium mb-1",children:t.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),a.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${s?"bg-primary border-primary":"border-muted-foreground"}`,children:s&&a.jsx(v.Z,{className:"h-3 w-3 text-primary-foreground"})})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.questionCount," questions • ",t.industryRelevance]})]})},t.id)})}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-4",children:["Selected: ",e.selectedSections.length," of ",i.length," sections"]})]})]})}function L({formData:e,createdAuditId:t}){let s=(0,S.$Q)(e.isoStandard),i=(0,S.GG)(e.isoStandard),r=i.filter(t=>e.selectedSections.includes(t.id));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Audit Setup Complete"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:'Your audit has been successfully created. Review the configuration below and click "Complete Setup" to begin the audit execution.'}),t&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(v.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-700",children:["Audit ID: ",t]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-base",children:"Audit Details"})}),(0,a.jsxs)(n.aY,{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Title:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.title})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Company:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.companyName})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Address:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.companyAddress})]})]})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-base",children:"Lead Auditor"})}),(0,a.jsxs)(n.aY,{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Name:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.leadAuditorName})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Email:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.leadAuditorEmail})]}),e.leadAuditorTitle&&(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Title:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.leadAuditorTitle})]})]})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"text-base",children:["Interviewees (",e.interviewees.length,")"]})}),a.jsx(n.aY,{children:0===e.interviewees.length?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No interviewees added"}):a.jsx("div",{className:"space-y-2",children:e.interviewees.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:[" - ",e.jobTitle]})]},t))})})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{className:"text-base",children:"Audit Scope"})}),a.jsx(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"ISO Standard:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(u.C,{variant:"outline",className:"font-semibold",children:s?.name}),a.jsx(u.C,{variant:"secondary",children:s?.version})]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:"Selected Sections:"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:[r.length," of ",i.length," sections selected"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:r.map(e=>a.jsx(u.C,{variant:"outline",className:"text-xs",children:e.number},e.id))})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"text-base",children:["Documents (",e.uploadedDocuments?.length||0,")"]})}),a.jsx(n.aY,{children:e.uploadedDocuments&&0!==e.uploadedDocuments.length?(0,a.jsxs)("div",{className:"space-y-2",children:[e.uploadedDocuments.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:e.originalName}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.fileSize/1048576).toFixed(1)," MB"]})]}),(0,a.jsxs)(u.C,{variant:"outline",className:"text-xs",children:["PENDING"===e.analysisStatus&&"Queued","PROCESSING"===e.analysisStatus&&"Analyzing","COMPLETED"===e.analysisStatus&&"Complete","FAILED"===e.analysisStatus&&"Failed"]})]},e.id)),a.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:a.jsx("p",{className:"text-xs text-blue-700",children:"\uD83D\uDCC4 Documents will be analyzed to provide intelligent clause references during the audit."})})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No documents uploaded"})})]})]})]})}},3273:(e,t,s)=>{"use strict";s.d(t,{X:()=>c,bZ:()=>d});var a=s(326),i=s(7577),r=s(8671),n=s(7863);let l=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=i.forwardRef(({className:e,variant:t,...s},i)=>a.jsx("div",{ref:i,role:"alert",className:(0,n.cn)(l({variant:t}),e),...s}));d.displayName="Alert",i.forwardRef(({className:e,...t},s)=>a.jsx("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let c=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},772:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var a=s(326),i=s(7577),r=s(4214),n=s(8671),l=s(7863);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef(({className:e,variant:t,size:s,asChild:i=!1,...n},c)=>{let o=i?r.g7:"button";return a.jsx(o,{className:(0,l.cn)(d({variant:t,size:s,className:e})),ref:c,...n})});c.displayName="Button"},2643:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>n,aY:()=>o,ll:()=>d});var a=s(326),i=s(7577),r=s(7863);let n=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let l=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=i.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let c=i.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let o=i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",i.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},4432:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var a=s(326),i=s(7577),r=s(7863);let n=i.forwardRef(({className:e,type:t,...s},i)=>a.jsx("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...s}));n.displayName="Input"},1048:(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var a=s(326),i=s(7577),r=s(4478),n=s(8671),l=s(7863);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef(({className:e,...t},s)=>a.jsx(r.f,{ref:s,className:(0,l.cn)(d(),e),...t}));c.displayName=r.f.displayName},64:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(326),i=s(7577),r=s(7273),n=s(7863);let l=i.forwardRef(({className:e,value:t,...s},i)=>a.jsx(r.fC,{ref:i,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:a.jsx(r.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));l.displayName=r.fC.displayName},7673:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var a=s(326),i=s(7577),r=s(7863);let n=i.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));n.displayName="Textarea"},3761:(e,t,s)=>{"use strict";s.d(t,{$Q:()=>c,A:()=>l,GG:()=>o,ae:()=>d,uU:()=>n,zg:()=>r});let a=[{id:"brand-identity",title:"Brand Identity",description:"Logo design, color palette, typography",category:"visual",standardId:"iso9001",number:"4",questionCount:12,riskLevel:"high",industryRelevance:"Critical for brand consistency and recognition"},{id:"brand-messaging",title:"Brand Messaging",description:"Voice, tone, key messages",category:"content",standardId:"iso9001",number:"5",questionCount:8,riskLevel:"medium",industryRelevance:"Important for communication effectiveness"},{id:"brand-application",title:"Brand Application",description:"How brand is applied across touchpoints",category:"implementation",standardId:"iso9001",number:"6",questionCount:15,riskLevel:"high",industryRelevance:"Essential for consistent brand experience"}],i=[{id:"iso9001",name:"ISO 9001:2015",description:"Quality Management Systems"},{id:"iso45001",name:"ISO 45001:2018",description:"Occupational Health and Safety Management Systems"},{id:"iso14001",name:"ISO 14001:2015",description:"Environmental Management Systems"}],r=i,n=[{id:"basic-brand-audit",name:"Basic Brand Audit",description:"Comprehensive brand assessment",sections:["brand-identity","brand-messaging","brand-application"],recommendedFor:["Initial brand assessment","Brand consistency evaluation","Marketing alignment review"]},{id:"comprehensive-audit",name:"Comprehensive ISO 9001 Audit",description:"Full system assessment covering all sections",sections:["brand-identity","brand-messaging","brand-application"],recommendedFor:["Annual management review","Certification preparation","Complete system evaluation"]},{id:"leadership-focus",name:"Leadership & Management Focus",description:"Focus on leadership and organizational context",sections:["brand-identity","brand-messaging"],recommendedFor:["Management system maturity assessment","Leadership effectiveness review","Strategic alignment evaluation"]}],l=a,d=e=>a.find(t=>t.id===e),c=e=>i.find(t=>t.id===e),o=e=>a.filter(t=>t.standardId===e)},7888:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8787:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},4659:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9183:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},1709:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},3685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},4061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(6557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3023:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(9510);let i=(0,s(8570).createProxy)(String.raw`/workspaces/logosaudit/app/new-audit/_components/new-audit-workflow.tsx#default`);function r(){return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:"Create New Audit"}),a.jsx("p",{className:"text-muted-foreground",children:"Set up a new ISO 9001 audit with company details and scope configuration"})]}),a.jsx(i,{})]})}},4478:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var a=s(7577),i=s(5226),r=s(326),n=a.forwardRef((e,t)=>(0,r.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=n},7273:(e,t,s)=>{"use strict";s.d(t,{fC:()=>y,z$:()=>N});var a=s(7577),i=s(3095),r=s(5226),n=s(326),l="Progress",[d,c]=(0,i.b)(l),[o,m]=d(l),u=a.forwardRef((e,t)=>{var s,a;let{__scopeProgress:i,value:l=null,max:d,getValueLabel:c=h,...m}=e;(d||0===d)&&!v(d)&&console.error((s=`${d}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=v(d)?d:100;null===l||j(l,u)||console.error((a=`${l}`,`Invalid prop \`value\` of value \`${a}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=j(l,u)?l:null,p=g(x)?c(x,u):void 0;return(0,n.jsx)(o,{scope:i,value:x,max:u,children:(0,n.jsx)(r.WV.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":g(x)?x:void 0,"aria-valuetext":p,role:"progressbar","data-state":f(x,u),"data-value":x??void 0,"data-max":u,...m,ref:t})})});u.displayName=l;var x="ProgressIndicator",p=a.forwardRef((e,t)=>{let{__scopeProgress:s,...a}=e,i=m(x,s);return(0,n.jsx)(r.WV.div,{"data-state":f(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...a,ref:t})});function h(e,t){return`${Math.round(e/t*100)}%`}function f(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function v(e){return g(e)&&!isNaN(e)&&e>0}function j(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=x;var y=u,N=p}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,103,474],()=>s(5358));module.exports=a})();